{"ast":null,"code":"var _jsxFileName = \"/Users/gautammali/Desktop/vendor-shop/client/src/components/UserDashboard/Notification.jsx\",\n  _s = $RefreshSig$();\nimport './UserDashboard.css';\nimport { Context } from '../../utils/Context';\nimport { useContext, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Notification() {\n  _s();\n  var _orders$data2, _orders$data2$orders;\n  const {\n    loginInfo\n  } = useContext(Context);\n  const [orders, setOrders] = useState([]);\n  const [count, setCount] = useState(0);\n  function counterFunc() {\n    var _orders$data, _orders$data$orders;\n    let newOrders = orders === null || orders === void 0 ? void 0 : (_orders$data = orders.data) === null || _orders$data === void 0 ? void 0 : (_orders$data$orders = _orders$data.orders) === null || _orders$data$orders === void 0 ? void 0 : _orders$data$orders.filter(order => {\n      return (order === null || order === void 0 ? void 0 : order.status) === true && (order === null || order === void 0 ? void 0 : order.read) === false;\n    });\n    setCount(newOrders === null || newOrders === void 0 ? void 0 : newOrders.length);\n  }\n  async function getUsersFunc() {\n    await axios.post(process.env.REACT_APP_BASE_URL + '/auth/vieworders', {\n      email: loginInfo === null || loginInfo === void 0 ? void 0 : loginInfo.email\n    }).then(res => {\n      setOrders(res.data);\n    });\n  }\n  async function readNotification(orderid) {\n    await axios.post(process.env.REACT_APP_BASE_URL + '/auth/notification', {\n      orderid\n    }).then(res => {\n      getUsersFunc();\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n  useEffect(() => {\n    counterFunc();\n  }, [orders]);\n  useEffect(() => {\n    getUsersFunc();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: loginInfo.status === true && loginInfo.role === \"User\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-panel-main-div\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-panel-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-panel-heading\",\n          children: [\"Notification (\", count ? count : 0, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-panel-div-box\",\n          children: orders === null || orders === void 0 ? void 0 : (_orders$data2 = orders.data) === null || _orders$data2 === void 0 ? void 0 : (_orders$data2$orders = _orders$data2.orders) === null || _orders$data2$orders === void 0 ? void 0 : _orders$data2$orders.map(order => /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: order !== null && order !== void 0 && order.status && (order === null || order === void 0 ? void 0 : order.read) === false ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"option-main-outer-box\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"user-name-title\",\n                children: order === null || order === void 0 ? void 0 : order.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 51,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"user-email-title\",\n                children: [\"OrderID: \", order === null || order === void 0 ? void 0 : order.orderid]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 52,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"user-mobile-title\",\n                children: [\"Vendor: \", order === null || order === void 0 ? void 0 : order.vendor]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 53,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"user-mobile-title\",\n                children: [\"Qty: \", order === null || order === void 0 ? void 0 : order.qty]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 54,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"user-mobile-title\",\n                children: [\"Price: \", order === null || order === void 0 ? void 0 : order.price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 55,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"user-mobile-title-status\",\n                children: [\"Status: \", order !== null && order !== void 0 && order.status ? \"Accepted\" : \"Pending\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 56,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: !(order !== null && order !== void 0 && order.read) ? /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => readNotification(order === null || order === void 0 ? void 0 : order.orderid),\n                  className: \"order-accept-btn\",\n                  children: \"Mark as Read\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 58,\n                  columnNumber: 69\n                }, this) : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 49\n              }, this)]\n            }, order === null || order === void 0 ? void 0 : order.orderid, true, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 45\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n          }, void 0, false))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"unauth-msg-div\",\n      children: \"Please Login as User\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 23\n    }, this)\n  }, void 0, false);\n}\n_s(Notification, \"VPs677lyKilBxRC1rjw8N3i6g2g=\");\n_c = Notification;\nexport default Notification;\nvar _c;\n$RefreshReg$(_c, \"Notification\");","map":{"version":3,"names":["Context","useContext","useEffect","useState","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","Notification","_s","_orders$data2","_orders$data2$orders","loginInfo","orders","setOrders","count","setCount","counterFunc","_orders$data","_orders$data$orders","newOrders","data","filter","order","status","read","length","getUsersFunc","post","process","env","REACT_APP_BASE_URL","email","then","res","readNotification","orderid","catch","error","console","log","children","role","className","fileName","_jsxFileName","lineNumber","columnNumber","map","title","vendor","qty","price","onClick","_c","$RefreshReg$"],"sources":["/Users/gautammali/Desktop/vendor-shop/client/src/components/UserDashboard/Notification.jsx"],"sourcesContent":["import './UserDashboard.css';\r\nimport { Context } from '../../utils/Context';\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction Notification() {\r\n    const { loginInfo } = useContext(Context);\r\n    const [orders, setOrders] = useState([]);\r\n    const [count, setCount] = useState(0);\r\n\r\n    function counterFunc(){\r\n        let newOrders = orders?.data?.orders?.filter((order) => {\r\n            return order?.status === true && order?.read === false\r\n        })\r\n        setCount(newOrders?.length);\r\n    }\r\n\r\n    async function getUsersFunc() {\r\n        await axios.post(process.env.REACT_APP_BASE_URL + '/auth/vieworders', { email: loginInfo?.email }).then(res => {\r\n            setOrders(res.data);\r\n        })\r\n    }\r\n\r\n    async function readNotification(orderid){\r\n        await axios.post(process.env.REACT_APP_BASE_URL+'/auth/notification', {orderid}).then(res=>{\r\n            getUsersFunc();\r\n        }).catch(error=>{console.log(error)});\r\n\r\n    }\r\n\r\n    useEffect(()=>{\r\n        counterFunc();\r\n    }, [orders])\r\n\r\n    useEffect(() => {\r\n        getUsersFunc();\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            {\r\n                (loginInfo.status === true) && (loginInfo.role) === \"User\" ?\r\n                    <div className=\"admin-panel-main-div\">\r\n                        <div className=\"admin-panel-box\">\r\n                            <div className=\"admin-panel-heading\">Notification ({count?count:0})</div>\r\n                            <div className=\"admin-panel-div-box\">\r\n                                {orders?.data?.orders?.map((order) => (\r\n                                    <>\r\n                                        {(order?.status && order?.read === false) ?\r\n                                            <div key={order?.orderid} className=\"option-main-outer-box\">\r\n                                                <div className=\"user-name-title\">{order?.title}</div>\r\n                                                <div className=\"user-email-title\">OrderID: {order?.orderid}</div>\r\n                                                <div className=\"user-mobile-title\">Vendor: {order?.vendor}</div>\r\n                                                <div className=\"user-mobile-title\">Qty: {order?.qty}</div>\r\n                                                <div className=\"user-mobile-title\">Price: {order?.price}</div>\r\n                                                <div className=\"user-mobile-title-status\">Status: {order?.status ? \"Accepted\" : \"Pending\"}</div>\r\n                                                <div>\r\n                                                    {!order?.read ? <button onClick={()=>readNotification(order?.orderid)} className=\"order-accept-btn\">Mark as Read</button> : \"\"}\r\n                                                </div>\r\n                                            </div>\r\n                                            : <></>}\r\n                                    </>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    : <div className=\"unauth-msg-div\">Please Login as User</div>\r\n            }\r\n        </>\r\n    )\r\n}\r\nexport default Notification;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}